<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>回覆已送出</title>
</head>

<body onload="startup()">
    <h1>您的回覆已送出</h1>
    <h3><%= user %>，您好：<br></h3>
    <h3>您的排序結果如下方表格</h3>
    <table>
        <tr>
            <th>優先順序</th>
            <th>項目</th>
            <th>現況滿意度</th>
        </tr>
        <tr>
            <td>1</td>
            <td id="1st"></td>
            <td id="a1st"></td>
        </tr>
        <tr>
            <td>2</td>
            <td id="2nd"></td>
            <td id="a2nd"></td>
        </tr>
        <tr>
            <td>3</td>
            <td id="3rd"></td>
            <td id="a3rd"></td>
        </tr>
        <tr>
            <td>4</td>
            <td id="4th"></td>
            <td id="a4th"></td>
        </tr>
        <tr>
            <td>5</td>
            <td id="5th"></td>
            <td id="a5th"></td>
        </tr>
        <tr>
            <td>6</td>
            <td id="6th"></td>
            <td id="a6th"></td>
        </tr>
        <tr>
            <td>7</td>
            <td id="7th"></td>
            <td id="a7th"></td>
        </tr>
        <tr>
            <td>8</td>
            <td id="8th"></td>
            <td id="a8th"></td>
        </tr>
        <tr>
            <td>9</td>
            <td id="9th"></td>
            <td id="a9th"></td>
        </tr>
        <tr>
            <td>10</td>
            <td id="10th"></td>
            <td id="a10th"></td>
        </tr>
        <tr>
            <td>11</td>
            <td id="11th"></td>
            <td id="a11th"></td>
        </tr>
        <tr>
            <td>12</td>
            <td id="12th"></td>
            <td id="a12th"></td>
        </tr>
    </table>

    <h3>您今年<%= age %>歲，目前的工作內容為<%= career %>。</h3>
    <h3>您的Outcome性格分析評估報告結果為：
        第一個最迫切想要擁有的目標是<b id="first"></b>，代表著您想<b id="firstcon"></b>
        第二個迫切想要擁有的目標是<b id="second"></b>，代表著您想<b id="secondcon"></b>
        第三個想要擁有的目標是<b id="third"></b>，代表著您想<b id="thirdcon"></h3><b>
    </h3>
    <h3>您的第一個已經擁有且最滿意的現況是<b id="twelfth"></b>，代表著您想<b id="twelfthcon"></b>
        第二個已經擁有且第二滿意的現況是<b id="eleventh"></b>，代表著您想<b id="eleventhcon"></b>
        第三個已經擁有且第三滿意的現況是<b id="tenth"></b>，代表著您想<b id="tenthcon"></b><br>
    </h3>
    <h3>若您欲了解更多，請和李品睿老師接洽，Email為：</h3>
    <h3>下載本頁Outcome性格分析報告，將結果寄至我的Email（<%= email %>）：
        <a href="file/outcome.pdf" download="Outcome性格分析報告.pdf"></a>
    </h3>

<!----
    <h4>姓名:<%= user %>
    </h4>
    <h4>年齡:<%= age %>
    </h4>
    <h4>信箱:<%= email %>
    </h4>
    <h4>工作內容:<%= career %>
    </h4>
    <h4>最優先的三個:</h4>
    <ol>
        <li id="first"></li>
        <p id="firstcon"></p>
        <li id="second"></li>
        <p id="secondcon"></p>
        <li id="third"></li>
        <p id="thirdcon"></p>
    </ol>

    <h4>倒數三個:</h4>
    <ol>
        <li id="twelfth"></li>
        <p id="twelfthcon"></p>
        <li id="eleventh"></li>
        <p id="eleventhcon"></p>
        <li id="tenth"></li>
        <p id="tenthcon"></p>
    </ol>
----->

    <div style="width: 80%;margin:10% 10% 10% 10% ">
        <canvas id="theChartFirst"></canvas>
    </div>

    <div style="width: 80%;margin:10% 10% 10% 10% ">
        <canvas id="theChartLast"></canvas>
    
    </div>
    
    <div style="width: 80%;margin:10% 10% 10% 10% ">>
        <canvas id="theChart"></canvas>
    </div>
    <div align="center" style="margin-bottom:5%">
        <a href="/" ><input type="submit" value="再次提交表單"></a>
    </div>
</body>

<script>
    function startup() {
        let sortArray4table;
        sortArray = ['<%= userdata.sortIndependence %>', '<%= userdata.sortIdentity %>', '<%= userdata.sortAchievement %>', '<%= userdata.sortFreeTime %>', '<%= userdata.sortPower %>', '<%= userdata.sortReputation %>', '<%= userdata.sortMoney %>', '<%= userdata.sortExormisis %>', '<%= userdata.sortSelfEsteem %>', '<%= userdata.sortFamily %>', '<%= userdata.sortSafety %>', '<%= userdata.sortGrowth %>'];
        let answerArray4table;
        answerArray = ['<%= userdata.answerIndependence %>', '<%= userdata.answerIdentity %>', '<%= userdata.answerAchievement %>', '<%= userdata.answerFreeTime %>', '<%= userdata.answerPower %>', '<%= userdata.answerReputation %>', '<%= userdata.answerMoney %>', '<%= userdata.answerExormisis %>', '<%= userdata.answerSelfEsteem %>', '<%= userdata.answerFamily %>', '<%= userdata.answerSafety %>', '<%= userdata.answerGrowth %>'];
        let titleArray4table;
        titleArray = ['獨立性', '認同感', '成就感', '休閒時間', '權力', '聲望', '金錢', '推動力', '自尊', '家庭生活', '安全感', '個人成長'];
        let subtitleArray4table;
        subtitleArray4table = ['獨立性/自由做你自己想做的事; 能擺脫他人影響', '認同感/成就被肯定，表現有獎勵。', '成就感/成功完成工作，克服障礙，達成目標。', '休閒時間/從事工作以外你喜歡的休閒活動。', '權力/控制別人; 影響、主控。', '聲望/名聲、排行、受尊敬。', '金錢/個人所得的累積，五字登科的能力。', '推動力/要想一直改進工作表現的感覺或需要。', '自尊/你覺得自己有價值的一種感覺，自主性強。', '家庭生活/偏好家庭為中心的活動與興趣。', '安全感/關切工作的安全與穩定、安定。', '個人成長/能力及效率的發展，變成一個比較優秀的人。'];
        console.log(sortArray4table,answerArray4table,titleArray4table,subtitleArray4table)

        for (let i = 0; i < sortArray4table.length; i++) {
            switch (sortArray[i]) {
                case '1':
                    document.getElementById("1st").textContent = subtitleArray4table[i];
                    document.getElementById("a1st").textContent = answerArray4table[i];
                    break;
                case '2':
                    document.getElementById("2nd").textContent = subtitleArray4table[i];
                    document.getElementById("a2nd").textContent = answerArray4table[i];
                    break;
                case '3':
                    document.getElementById("3rd").textContent = subtitleArray4table[i];
                    document.getElementById("a3rd").textContent = answerArray4table[i];
                    break;
                case '4':
                    document.getElementById("4th").textContent = subtitleArray4table[i];
                    document.getElementById("a4th").textContent = answerArray4table[i];
                    break;
                case '5':
                    document.getElementById("5th").textContent = subtitleArray4table[i];
                    document.getElementById("a5th").textContent = answerArray4table[i];
                    break;
                case '6':
                    document.getElementById("6th").textContent = subtitleArray4table[i];
                    document.getElementById("a6th").textContent = answerArray4table[i];
                    break;
                case '7':
                    document.getElementById("7th").textContent = subtitleArray4table[i];
                    document.getElementById("a7th").textContent = answerArray4table[i];
                    break;
                case '8':
                    document.getElementById("8th").textContent = subtitleArray4table[i];
                    document.getElementById("a8th").textContent = answerArray4table[i];
                    break;
                case '9':
                    document.getElementById("9th").textContent = subtitleArray4table[i];
                    document.getElementById("a9th").textContent = answerArray4table[i];
                    break;
                case '10':
                    document.getElementById("10th").textContent = subtitleArray4table[i];
                    document.getElementById("a10th").textContent = answerArray4table[i];
                    break;

                case '11':
                    document.getElementById("11th").textContent = subtitleArray4table[i];
                    document.getElementById("a11th").textContent = answerArray4table[i];
                    break;
                case '12':
                    document.getElementById("12th").textContent = subtitleArray4table[i];
                    document.getElementById("a12th").textContent = answerArray4table[i];
                    break;
            }
        }


        let sortArray;
        sortArray = ['<%= sortIndependence %>', '<%= sortIdentity %>', '<%= sortAchievement %>', '<%= sortFreeTime %>', '<%= sortPower %>', '<%= sortReputation %>', '<%= sortMoney %>', '<%= sortExormisis %>', '<%= sortSelfEsteem %>', '<%= sortFamily %>', '<%= sortSafety %>', '<%= sortGrowth %>'];
        let answerArray;
        answerArray = ['<%= answerIndependence %>', '<%= answerIdentity %>', '<%= answerAchievement %>', '<%= answerFreeTime %>', '<%= answerPower %>', '<%= answerReputation %>', '<%= answerMoney %>', '<%= answerExormisis %>', '<%= answerSelfEsteem %>', '<%= answerFamily %>', '<%= answerSafety %>', '<%= answerGrowth %>'];
        let titleArray;
        titleArray = ['獨立性', '認同感', '成就感', '休閒時間', '權力', '聲望', '金錢', '推動力', '自尊', '家庭生活', '安全感', '個人成長'];
        let conclusionArray;
        conclusionArray = ['按照自己的想法進行自己的展業工作，獨立的管理，成為自己的老闆。','因表現優良得到實質獎勵，例如在公開場合或演講會中予以表揚。','成功的完成工作後所獲致的感覺。克服障礙以及成就目標。','可以依自己的意願安排非業務時間，以及從那些非業務時間安排所達到的愉悅程度。','一種能控制及掌握自己以及他人命運的感覺，能夠影響以及指導他人行為的感覺。','獲得同事，公司或社團組織的尊敬，別人對你在同事中“表現出眾”的感覺程度。','工作所能帶給個人的財務收入之多寡。','不斷提昇工作績效表現的需要或感覺。','對自我價值看法，在自己心目中，與群體相較自認為出眾的程度。','與家人相處生活的時間與品質。','維持現有工作的穩定性，明天會更好的感受程度。','個人能成長的空間，能夠變得更有能力，更有效率更優秀的感覺。'];

        let firstAnswer = 0;
        let secondAnswer = 0;
        let thirdAnswer = 0;

        for (let i = 0; i < sortArray.length; i++) {
            if (sortArray[i] == 1) {
                document.getElementById("first").textContent = titleArray[i] + "，現況滿意度評分為" + answerArray[i] + "顆★";
                firstAnswer = answerArray[i];
                document.getElementById("firstcon").textContent = conclusionArray[i];
            }
            if (sortArray[i] == 2) {
                document.getElementById("second").textContent = titleArray[i] + "，現況滿意度評分為" + answerArray[i] + "顆★";
                secondAnswer = answerArray[i];
                document.getElementById("secondcon").textContent = conclusionArray[i];
            }
            if (sortArray[i] == 3) {
                document.getElementById("third").textContent = titleArray[i] + "，現況滿意度評分為" + answerArray[i] + "顆★";
                thirdAnswer = answerArray[i];
                document.getElementById("thirdcon").textContent = conclusionArray[i];
            }
        }

        let twelfthAnswer = 0;
        let eleventhAnswer = 0;
        let tenthAnswer = 0;

        for (let i = 0; i < sortArray.length; i++) {
            if (sortArray[i] == 12) {
                document.getElementById("twelfth").textContent = titleArray[i] + "，滿意度為" + answerArray[i] + "顆★";
                twelfthAnswer = answerArray[i];
                document.getElementById("twelfthcon").textContent = conclusionArray[i];
            }
            if (sortArray[i] == 11) {
                document.getElementById("eleventh").textContent = titleArray[i] + "，滿意度為" + answerArray[i] + "顆★";
                eleventhAnswer = answerArray[i];
                document.getElementById("eleventhcon").textContent = conclusionArray[i];
            }
            if (sortArray[i] == 10) {
                document.getElementById("tenth").textContent = titleArray[i] + "，滿意度為" + answerArray[i] + "顆★";
                tenthAnswer = answerArray[i];
                document.getElementById("tenthcon").textContent = conclusionArray[i];
            }
        }
    
        //const labelsFirstArray = [("first").textContent, ("second").textContent, ("third").textContent];
        const labelsFirstArray = [document.getElementById("first").textContent, document.getElementById("second").textContent, document.getElementById("third").textContent];
        
        const dataFirst = {
            labels: labelsFirstArray,
            datasets: [{
            label: '最急迫想要擁有的現況滿意評分',
            data: [firstAnswer, secondAnswer, thirdAnswer],
            backgroundColor: [
            'rgba(255, 99, 132, 0.2)',
            'rgba(255, 159, 64, 0.2)',
            'rgba(255, 205, 86, 0.2)'
            ],
            borderColor: [
            'rgb(255, 99, 132)',
            'rgb(255, 159, 64)',
            'rgb(255, 205, 86)'
            ],
            borderWidth: 1
            }]
        };

        const configFirst = {
            type: 'bar',
            data: dataFirst,
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            },
        };

        const myChartFirst = new Chart(    
            document.getElementById('theChartFirst'),
            configFirst
        );
        

        const labelsLastArray = [document.getElementById("twelfth").textContent, document.getElementById("eleventh").textContent, document.getElementById("tenth").textContent];
        
        const dataLast = {
            labels: labelsLastArray,
            datasets: [{
            label: '最不急迫想要擁有的現況滿意評分',
            data: [twelfthAnswer, eleventhAnswer, tenthAnswer],
            backgroundColor: [
            'rgba(54, 162, 235, 0.2)',
            'rgba(153, 102, 255, 0.2)',
            'rgba(201, 203, 207, 0.2)'
            ],
            borderColor: [
            'rgb(54, 162, 235)',
            'rgb(153, 102, 255)',
            'rgb(201, 203, 207)'
            ],
            borderWidth: 1
            }]
        };

        const configLast = {
            type: 'bar',
            data: dataLast,
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            },
        };

        const myChartLast = new Chart(    
            document.getElementById('theChartLast'),
            configLast
        );
        

        
        const labels = titleArray; 
        
        const data = {
            labels: labels,
            datasets: [{
                label: '現況滿意度評分',
                backgroundColor: 'rgb(255, 99, 132)',
                borderColor: 'rgb(255, 99, 132)',
                data: answerArray
            }]
        };
        const config = {
                type: 'line',
                data: data,
                options: {}
        };

        const myChart = new Chart(    
            document.getElementById('theChart'),
            config
        );
        
        /*
        const data = {
            labels: labelsFirstArray,
            datasets: [{
            label: '最急迫想要擁有的現況滿意評分',
            data: [firstAnswer, secondAnswer, thirdAnswer],
            backgroundColor: [
            'rgba(255, 99, 132, 0.2)',
            'rgba(255, 159, 64, 0.2)',
            'rgba(255, 205, 86, 0.2)'
            ],
            borderColor: [
            'rgb(255, 99, 132)',
            'rgb(255, 159, 64)',
            'rgb(255, 205, 86)'
            ],
            borderWidth: 1
            }]
        }

        const config = {
            type: 'bar',
            data: data,
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            },
        };

        const myChart = new Chart(    
            document.getElementById('theChart'),
            config
        );
        */
    }

</script>

</html>
